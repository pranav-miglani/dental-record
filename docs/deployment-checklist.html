<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Hospital System - Deployment Checklist</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .progress-bar-container {
            background: rgba(255,255,255,0.2);
            height: 30px;
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            background: #4ade80;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            margin-top: 20px;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
        }

        .section-header {
            background: #f3f4f6;
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .section-header:hover {
            background: #e5e7eb;
        }

        .section-header h2 {
            font-size: 1.5em;
            color: #1f2937;
        }

        .section-progress {
            background: #3b82f6;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .section-content {
            padding: 20px;
            display: none;
        }

        .section-content.active {
            display: block;
        }

        .step {
            padding: 15px;
            margin: 10px 0;
            background: #f9fafb;
            border-left: 4px solid #e5e7eb;
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            transition: all 0.2s;
        }

        .step:hover {
            background: #f3f4f6;
            border-left-color: #3b82f6;
        }

        .step.completed {
            background: #d1fae5;
            border-left-color: #10b981;
        }

        .step input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-right: 15px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: bold;
            font-size: 1.1em;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .step-description {
            color: #6b7280;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .step-commands {
            background: #1f2937;
            color: #10b981;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            overflow-x: auto;
        }

        .step-commands code {
            display: block;
            white-space: pre-wrap;
        }

        .expand-icon {
            transition: transform 0.3s;
        }

        .expand-icon.expanded {
            transform: rotate(180deg);
        }

        .save-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #10b981;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
            transition: all 0.3s;
        }

        .save-button:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6);
        }

        .reset-button {
            position: fixed;
            bottom: 30px;
            right: 180px;
            background: #ef4444;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
            transition: all 0.3s;
        }

        .reset-button:hover {
            background: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.6);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
        }

        .notification.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .warning {
            background: #fef3c7;
            border-left-color: #f59e0b;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
        }

        .warning strong {
            color: #d97706;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .stats {
                flex-direction: column;
                gap: 10px;
            }

            .save-button, .reset-button {
                position: relative;
                bottom: auto;
                right: auto;
                margin: 20px 10px;
                width: calc(50% - 20px);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Dental Hospital System</h1>
            <p>Complete Deployment Checklist</p>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar">0%</div>
            </div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" id="completedCount">0</div>
                    <div class="stat-label">Completed</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">Total Steps</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="progressPercent">0%</div>
                    <div class="stat-label">Progress</div>
                </div>
            </div>
        </div>

        <div class="content" id="checklistContent">
            <!-- Sections will be dynamically generated -->
        </div>
    </div>

    <button class="save-button" onclick="saveProgress()">üíæ Save Progress</button>
    <button class="reset-button" onclick="resetProgress()">üîÑ Reset All</button>
    <div class="notification" id="notification">Progress saved!</div>

    <script>
        const checklistData = {
            "üìö Read Documentation First": {
                "Read Complete Deployment Guide": {
                    description: "üìñ Read DEPLOYMENT.md for complete deployment instructions. This consolidated guide includes everything: quick start, interactive deployment, GitHub Secrets, custom domains, manual deployment, migration, and troubleshooting.",
                    command: "# Open: docs/DEPLOYMENT.md\n# Read through all sections:\n# - Quick Start\n# - Prerequisites\n# - Interactive Deployment (Recommended)\n# - GitHub Secrets Setup (CI/CD)\n# - Custom Domain Setup (Optional)\n# - Manual Deployment\n# - Migration Guide\n# - Troubleshooting\n# - Verification"
                },
                "Understand What You're Deploying": {
                    description: "Understand the system architecture: AWS = Cloud platform, Terraform = Infrastructure as Code, Lambda = Serverless functions, DynamoDB = NoSQL database, S3 = File storage, API Gateway = REST API, CloudFront = CDN",
                    command: "# Review Prerequisites section in DEPLOYMENT.md\n# Key concepts:\n# - Serverless architecture (Lambda, API Gateway)\n# - Infrastructure as Code (Terraform)\n# - NoSQL database (DynamoDB)\n# - Object storage (S3)\n# - CI/CD (GitHub Actions)"
                },
                "Choose Deployment Method": {
                    description: "Choose your deployment method: 1) Interactive (npm run deploy) - Recommended, asks for all config, 2) GitHub Secrets (CI/CD) - For automated deployments, 3) Manual - For experienced developers who want full control",
                    command: "# Review Quick Start section in DEPLOYMENT.md\n# Method 1: Interactive (Easiest)\n#   npm run deploy\n#   - Asks for all configuration\n#   - Deploys everything automatically\n#   - Best for beginners\n\n# Method 2: GitHub Secrets (CI/CD)\n#   - Store secrets in GitHub\n#   - Auto-deploy on push\n#   - Best for teams\n\n# Method 3: Manual\n#   - Full control\n#   - Step-by-step commands\n#   - Best for experienced developers"
                }
            },
            "üöÄ Interactive Deployment (Recommended)": {
                "Configure AWS CLI": {
                    description: "Configure AWS CLI with your credentials. Run: aws configure, then enter Access Key ID, Secret Access Key, region (us-east-1), and output format (json).",
                    command: "aws configure\n# Enter:\n# AWS Access Key ID: AKIA...\n# AWS Secret Access Key: wJalr...\n# Default region: us-east-1\n# Default output: json"
                },
                "Run Interactive Deployment": {
                    description: "Run the interactive deployment script. It will ask for all configuration and deploy everything automatically. Takes 20-35 minutes.",
                    command: "npm run deploy\n\n# OR:\n./scripts/deploy-interactive.sh\n\n# The script will:\n# 1. Ask for AWS region\n# 2. Ask for project name\n# 3. Ask for JWT secret (or generates)\n# 4. Ask for admin password\n# 5. Ask for Terraform state bucket\n# 6. Ask for custom domains (optional)\n# 7. Deploy everything automatically"
                },
                "Save Configuration": {
                    description: "The script saves all configuration to .env file. Review the file to ensure all values are correct.",
                    command: "cat .env\n# Should show:\n# AWS_REGION=us-east-1\n# PROJECT_NAME=dental-hospital-system\n# JWT_SECRET=...\n# ADMIN_PASSWORD=...\n# etc."
                },
                "Verify Deployment": {
                    description: "After deployment completes, verify API Gateway URL and admin credentials are displayed. Save these securely!",
                    command: "cat api-url.txt\n# Should show API Gateway URL\n# Admin credentials displayed in terminal\n# Mobile: 9999999999\n# Password: (your password)"
                }
            },
            "üîê GitHub Secrets Setup (CI/CD)": {
                "Read GitHub Secrets Section": {
                    description: "Read the GitHub Secrets Setup section in DEPLOYMENT.md. This explains why to use GitHub Secrets, what secrets are needed, and how to set them up.",
                    command: "# Open: docs/DEPLOYMENT.md\n# Go to: GitHub Secrets Setup (CI/CD) section\n# Read: Why Use GitHub Secrets, Required Secrets, Setup Steps"
                },
                "Navigate to Repository Settings": {
                    description: "Go to GitHub repository settings to add secrets. Path: Repository ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions. See DEPLOYMENT.md for detailed steps.",
                    command: "# Go to:\n# https://github.com/YOUR_USERNAME/YOUR_REPO/settings/secrets/actions\n# Click 'New repository secret' for each secret\n\n# Required secrets:\n# - AWS_ACCESS_KEY_ID\n# - AWS_SECRET_ACCESS_KEY\n# - JWT_SECRET"
                },
                "Add AWS Credentials": {
                    description: "Add AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY secrets. Get these from AWS IAM ‚Üí Users ‚Üí Your User ‚Üí Security Credentials ‚Üí Create Access Key. ‚ö†Ô∏è Copy secret key immediately - you won't see it again!",
                    command: "# Get from AWS Console:\n# IAM ‚Üí Users ‚Üí Your User ‚Üí Security Credentials ‚Üí Create Access Key\n\n# Add secrets:\n# Name: AWS_ACCESS_KEY_ID\n# Value: AKIA...\n\n# Name: AWS_SECRET_ACCESS_KEY\n# Value: wJalr...\n\n# ‚ö†Ô∏è Copy secret key immediately - you won't see it again!"
                },
                "Add Core Configuration": {
                    description: "Add JWT_SECRET (generate: openssl rand -base64 32), ADMIN_PASSWORD, AWS_REGION (optional, defaults to us-east-1), PROJECT_NAME (optional, defaults to dental-hospital-system).",
                    command: "# Generate JWT secret:\nopenssl rand -base64 32\n\n# Add secrets:\n# Name: JWT_SECRET\n# Value: (generated secret from above)\n\n# Name: ADMIN_PASSWORD\n# Value: YourSecurePassword123!\n\n# Optional:\n# Name: AWS_REGION\n# Value: us-east-1\n\n# Name: PROJECT_NAME\n# Value: dental-hospital-system"
                },
                "Add Custom Domain Secrets (Optional)": {
                    description: "If using custom domains, add: API_CUSTOM_DOMAIN, ROUTE53_HOSTED_ZONE_ID, ACM_CERTIFICATE_ARN, CLOUDFRONT_CUSTOM_DOMAIN, CLOUDFRONT_ROUTE53_ZONE_ID, CLOUDFRONT_ACM_CERTIFICATE_ARN. See DEPLOYMENT.md Custom Domain section.",
                    command: "# Optional secrets for custom domain:\n# Name: API_CUSTOM_DOMAIN\n# Value: api.rghs-dental.info\n\n# Name: ROUTE53_HOSTED_ZONE_ID\n# Value: Z1234567890ABC\n\n# Name: ACM_CERTIFICATE_ARN\n# Value: arn:aws:acm:us-east-1:123456789012:certificate/abc123\n\n# Name: CLOUDFRONT_CUSTOM_DOMAIN\n# Value: cdn.rghs-dental.info\n\n# Name: CLOUDFRONT_ROUTE53_ZONE_ID\n# Value: Z1234567890ABC\n\n# Name: CLOUDFRONT_ACM_CERTIFICATE_ARN\n# Value: arn:aws:acm:us-east-1:123456789012:certificate/xyz789"
                },
                "Verify All Secrets Added": {
                    description: "Verify all required secrets are added. You should see: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, JWT_SECRET, and optionally ADMIN_PASSWORD, AWS_REGION, PROJECT_NAME, and custom domain secrets.",
                    command: "# Check in GitHub:\n# Settings ‚Üí Secrets and variables ‚Üí Actions\n# Should see:\n# ‚úì AWS_ACCESS_KEY_ID\n# ‚úì AWS_SECRET_ACCESS_KEY\n# ‚úì JWT_SECRET\n# ‚úì ADMIN_PASSWORD (optional)\n# ‚úì AWS_REGION (optional)\n# ‚úì PROJECT_NAME (optional)\n# ‚úì Custom domain secrets (if using)"
                },
                "Deploy via GitHub Actions": {
                    description: "Deploy via GitHub Actions. Push to main branch (auto-deploys) OR go to Actions ‚Üí Deploy to AWS ‚Üí Run workflow. See DEPLOYMENT.md for details.",
                    command: "# Option 1: Push to main (auto-deploy)\ngit push origin main\n# GitHub Actions will:\n# - Load secrets from GitHub Secrets\n# - Deploy infrastructure\n# - Deploy application\n# - Create admin user\n\n# Option 2: Manual trigger\n# Go to: Actions ‚Üí Deploy to AWS ‚Üí Run workflow\n# Select environment: production\n# Click 'Run workflow'"
                },
                "Monitor GitHub Actions": {
                    description: "Monitor the GitHub Actions workflow. Check the Actions tab to see deployment progress, logs, and any errors. The workflow will show deployment summary when complete.",
                    command: "# Go to: Actions tab in GitHub\n# Click on latest workflow run\n# Watch deployment steps:\n# - Checkout code\n# - Setup Node.js\n# - Setup Terraform\n# - Configure AWS credentials\n# - Load configuration from secrets\n# - Install dependencies\n# - Run deployment\n# - Save deployment outputs\n\n# Check logs for any errors"
                }
            },
            "üåê Custom Domain Setup (Optional)": {
                "Create Route53 Hosted Zone": {
                    description: "Create Route53 hosted zone for your domain. Go to Route53 Console ‚Üí Create hosted zone ‚Üí Enter domain name (e.g., rghs-dental.info).",
                    command: "# Go to: https://console.aws.amazon.com/route53/\n# Create hosted zone:\n# Domain name: rghs-dental.info\n# Type: Public hosted zone\n# Save Hosted Zone ID: Z1234567890ABC"
                },
                "Request ACM Certificates": {
                    description: "Request ACM certificates in us-east-1 region. One for API Gateway (api.rghs-dental.info) and one for CloudFront (cdn.rghs-dental.info). Use DNS validation.",
                    command: "# Go to: https://console.aws.amazon.com/acm/home?region=us-east-1\n# Request certificate:\n# Domain: api.rghs-dental.info\n# Validation: DNS validation\n# Create record in Route53\n# Wait 5-30 minutes for validation\n# Save Certificate ARN"
                },
                "Update Domain Nameservers": {
                    description: "Update your domain registrar's nameservers with Route53 nameservers. This allows Route53 to manage DNS for your domain.",
                    command: "# Get Route53 nameservers:\n# Route53 Console ‚Üí Hosted Zone ‚Üí NS record\n# Copy all 4 nameservers\n# Update at your domain registrar\n# Wait 24-48 hours for DNS propagation"
                },
                "Configure During Deployment": {
                    description: "When running npm run deploy, enter custom domain details: API domain, Route53 zone ID, ACM certificate ARN, CloudFront domain (optional).",
                    command: "# During npm run deploy:\n# API Custom Domain: api.rghs-dental.info\n# Route53 Hosted Zone ID: Z1234567890ABC\n# ACM Certificate ARN: arn:aws:acm:...\n# CloudFront Custom Domain: cdn.rghs-dental.info (optional)\n# etc."
                },
                "Verify DNS Records": {
                    description: "After deployment, verify DNS records were created. Check with: dig api.rghs-dental.info and dig cdn.rghs-dental.info",
                    command: "dig api.rghs-dental.info\n# Should show AWS resources\n\ndig cdn.rghs-dental.info\n# Should show CloudFront distribution"
                }
            },
            "Prerequisites": {
                "Install Node.js": {
                    description: "Install Node.js version 20 or higher. Mac: brew install node@20, Windows: Download from nodejs.org, Linux: Use package manager. Verify with: node --version",
                    command: "# Mac:\nbrew install node@20\n\n# Windows:\n# Download from https://nodejs.org/\n\n# Linux:\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt-get install -y nodejs\n\n# Verify:\nnode --version\n# Should show: v20.x.x"
                },
                "Install AWS CLI": {
                    description: "Install AWS CLI version 2.0 or higher. Mac: brew install awscli, Windows: Download MSI installer, Linux: Use curl script. Verify with: aws --version",
                    command: "# Mac:\nbrew install awscli\n\n# Windows:\n# Download from https://awscli.amazonaws.com/AWSCLIV2.msi\n\n# Linux:\ncurl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\nunzip awscliv2.zip\nsudo ./aws/install\n\n# Verify:\naws --version\n# Should show: aws-cli/2.x.x"
                },
                "Install Terraform": {
                    description: "Install Terraform version 1.5 or higher. Mac: brew install terraform, Windows: Download from terraform.io, Linux: Download and unzip. Verify with: terraform version",
                    command: "# Mac:\nbrew install terraform\n\n# Windows:\n# Download from https://www.terraform.io/downloads\n\n# Linux:\nwget https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip\nunzip terraform_1.6.0_linux_amd64.zip\nsudo mv terraform /usr/local/bin/\n\n# Verify:\nterraform version\n# Should show: Terraform v1.5.x or higher"
                },
                "Install Git": {
                    description: "Install Git if not already installed. Mac: brew install git, Windows: Download from git-scm.com, Linux: sudo apt install git. Verify with: git --version",
                    command: "# Mac:\nbrew install git\n\n# Windows:\n# Download from https://git-scm.com/download/win\n\n# Linux:\nsudo apt install git\n\n# Verify:\ngit --version"
                },
                "Install Docker (Optional)": {
                    description: "Install Docker for local DynamoDB testing. Mac/Windows: Download Docker Desktop, Linux: Use curl script. Verify with: docker --version",
                    command: "# Mac/Windows:\n# Download Docker Desktop from https://www.docker.com/products/docker-desktop\n\n# Linux:\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n\n# Verify:\ndocker --version"
                },
                "Verify All Installations": {
                    description: "Run all version commands to verify everything is installed correctly.",
                    command: "node --version\nnpm --version\naws --version\nterraform version\ngit --version\ndocker --version\n# All should show version numbers"
                }
            },
            "AWS Account Setup": {
                "Create AWS Account": {
                    description: "Create AWS account at aws.amazon.com. Steps: 1) Go to aws.amazon.com, 2) Click 'Create an AWS Account', 3) Enter email/password, 4) Provide payment info (free tier credits available), 5) Verify phone, 6) Choose Basic support plan. Wait for activation email (5-10 minutes).",
                    command: "# Step-by-step:\n# 1. Go to https://aws.amazon.com/\n# 2. Click 'Create an AWS Account' (top right)\n# 3. Enter email and choose account name\n# 4. Create password\n# 5. Enter contact information\n# 6. Enter credit card (won't be charged for free tier)\n# 7. Verify phone number\n# 8. Choose 'Basic Plan' (Free)\n# 9. Wait for activation email (5-10 minutes)"
                },
                "Create IAM User": {
                    description: "Create IAM user 'dental-hospital-admin' with AdministratorAccess policy. Steps: 1) AWS Console ‚Üí Search 'IAM', 2) Click 'Users' ‚Üí 'Create user', 3) Username: dental-hospital-admin, 4) Click 'Next', 5) Select 'Attach policies directly', 6) Search 'AdministratorAccess', 7) Check the box, 8) Click 'Create user'.",
                    command: "# Detailed steps:\n# 1. Login to https://console.aws.amazon.com/\n# 2. Search 'IAM' in top search bar\n# 3. Click 'Users' in left menu\n# 4. Click 'Create user' button\n# 5. Username: dental-hospital-admin\n# 6. Click 'Next'\n# 7. Select 'Attach policies directly'\n# 8. Search 'AdministratorAccess'\n# 9. Check the box\n# 10. Click 'Next' then 'Create user'"
                },
                "Create Access Keys": {
                    description: "Create access keys for the IAM user. Steps: 1) Click on the user, 2) Go to 'Security credentials' tab, 3) Click 'Create access key', 4) Select 'Command Line Interface (CLI)', 5) Check confirmation, 6) Click 'Next', 7) ‚ö†Ô∏è COPY BOTH KEYS IMMEDIATELY - You can only see secret once!",
                    command: "# Steps:\n# 1. Click on 'dental-hospital-admin' user\n# 2. Go to 'Security credentials' tab\n# 3. Click 'Create access key'\n# 4. Select 'Command Line Interface (CLI)'\n# 5. Check confirmation box\n# 6. Click 'Next'\n# 7. ‚ö†Ô∏è COPY BOTH:\n#    - Access Key ID: AKIA...\n#    - Secret Access Key: wJalr...\n# 8. Save in a text file (aws-credentials.txt)\n# 9. Click 'Done'"
                },
                "Save Access Keys Securely": {
                    description: "‚ö†Ô∏è CRITICAL: Save Access Key ID and Secret Access Key in a secure file. You won't see the secret key again! Create aws-credentials.txt file (DO NOT commit to git).",
                    command: "# Create file:\ncat > aws-credentials.txt << EOF\nAccess Key ID: AKIA...\nSecret Access Key: wJalr...\nEOF\n\n# ‚ö†Ô∏è DO NOT commit this file to git!\n# It's already in .gitignore"
                },
                "Configure AWS CLI": {
                    description: "Configure AWS CLI with your credentials. Run: aws configure, then enter: 1) Access Key ID (from saved file), 2) Secret Access Key (from saved file), 3) Default region: us-east-1, 4) Default output: json. Press Enter after each.",
                    command: "aws configure\n\n# You'll be prompted for:\n# AWS Access Key ID [None]: AKIA... (paste from aws-credentials.txt)\n# AWS Secret Access Key [None]: wJalr... (paste from aws-credentials.txt)\n# Default region name [None]: us-east-1\n# Default output format [None]: json\n\n# Press Enter after each entry"
                },
                "Verify AWS Configuration": {
                    description: "Verify AWS CLI is configured correctly. Run: aws sts get-caller-identity. Should return JSON with UserId, Account (12-digit number), and Arn. If you see this, configuration worked!",
                    command: "aws sts get-caller-identity\n\n# Expected output:\n# {\n#     \"UserId\": \"AIDA...\",\n#     \"Account\": \"123456789012\",\n#     \"Arn\": \"arn:aws:iam::123456789012:user/dental-hospital-admin\"\n# }\n\n# ‚úÖ If you see this, it worked!\n# ‚ùå If you see an error, check your credentials"
                },
                "Choose Unique S3 Bucket Name": {
                    description: "Choose a unique S3 bucket name. Format: dental-hospital-terraform-state-YOURNAME-2024. Replace YOURNAME with your name/company. S3 bucket names must be globally unique. Write it down!",
                    command: "# Example names:\n# dental-hospital-terraform-state-john-doe-2024\n# dental-hospital-terraform-state-company-name-2024\n# dental-hospital-terraform-state-yourname-12345\n\n# ‚ö†Ô∏è Write your chosen name down - you'll need it!"
                },
                "Create S3 Bucket for Terraform State": {
                    description: "Create S3 bucket for Terraform state storage. Replace YOUR-UNIQUE-NAME with your chosen name. If you get 'BucketAlreadyExists' error, choose a different name.",
                    command: "# Replace YOUR-UNIQUE-NAME with your actual bucket name\naws s3 mb s3://dental-hospital-terraform-state-YOUR-UNIQUE-NAME\n\n# Expected output:\n# make_bucket: dental-hospital-terraform-state-YOUR-UNIQUE-NAME\n\n# ‚ùå If error 'BucketAlreadyExists': Choose different name"
                },
                "Enable S3 Versioning": {
                    description: "Enable versioning on the Terraform state bucket. This allows recovery of previous state files if something goes wrong.",
                    command: "# Replace YOUR-UNIQUE-NAME with your bucket name\naws s3api put-bucket-versioning \\\n  --bucket dental-hospital-terraform-state-YOUR-UNIQUE-NAME \\\n  --versioning-configuration Status=Enabled\n\n# No output means success!"
                },
                "Enable S3 Encryption": {
                    description: "Enable encryption on the Terraform state bucket for security. This encrypts the state file at rest.",
                    command: "# Replace YOUR-UNIQUE-NAME with your bucket name\naws s3api put-bucket-encryption \\\n  --bucket dental-hospital-terraform-state-YOUR-UNIQUE-NAME \\\n  --server-side-encryption-configuration '{\"Rules\":[{\"ApplyServerSideEncryptionByDefault\":{\"SSEAlgorithm\":\"AES256\"}}]}'\n\n# No output means success!"
                },
                "Block S3 Public Access": {
                    description: "Block public access to the Terraform state bucket. This is a security best practice.",
                    command: "# Replace YOUR-UNIQUE-NAME with your bucket name\naws s3api put-public-access-block \\\n  --bucket dental-hospital-terraform-state-YOUR-UNIQUE-NAME \\\n  --public-access-block-configuration \\\n    \"BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true\"\n\n# No output means success!"
                },
                "Verify S3 Bucket Created": {
                    description: "Verify the S3 bucket was created successfully. Should see your bucket name in the list.",
                    command: "aws s3 ls | grep terraform-state\n\n# Expected output:\n# 2024-01-08 00:00:00 dental-hospital-terraform-state-YOUR-UNIQUE-NAME\n\n# ‚úÖ If you see your bucket, it worked!"
                }
            },
            "Local Development Setup": {
                "Navigate to Project Directory": {
                    description: "Open Terminal/Command Prompt and navigate to project directory. Mac/Linux: cd /Users/apple/repository/dental-hospital-system, Windows: cd C:\\Users\\YourName\\repository\\dental-hospital-system. Verify with: pwd (Mac/Linux) or cd (Windows).",
                    command: "# Mac/Linux:\ncd /Users/apple/repository/dental-hospital-system\npwd  # Should show the project path\n\n# Windows:\ncd C:\\Users\\YourName\\repository\\dental-hospital-system\ncd  # Shows current directory\n\n# Verify you're in right place:\nls\n# Should see: package.json, src/, infrastructure/, docs/"
                },
                "Install Dependencies": {
                    description: "Install all Node.js dependencies. This downloads all code libraries the project needs. Takes 2-5 minutes depending on internet speed. Creates node_modules/ folder with hundreds of packages (this is normal!).",
                    command: "npm install\n\n# What happens:\n# - Downloads packages from internet\n# - Creates node_modules/ folder\n# - Takes 2-5 minutes\n\n# Expected output:\n# added 1234 packages, and audited 1235 packages in 2m\n\n# ‚ùå If errors: Check internet, try 'npm cache clean --force' then 'npm install' again"
                },
                "Get AWS Account ID": {
                    description: "Get your AWS Account ID (12-digit number). This identifies your AWS account. Copy this number - you'll need it for .env file.",
                    command: "aws sts get-caller-identity --query Account --output text\n\n# Expected output:\n# 123456789012\n\n# ‚ö†Ô∏è Copy this 12-digit number! You'll need it next."
                },
                "Generate JWT Secret": {
                    description: "Generate a secure random string for JWT token encryption. This is like a password that encrypts your authentication tokens. Copy the output - you'll need it for .env file.",
                    command: "openssl rand -base64 32\n\n# Expected output:\n# aBcDeFgHiJkLmNoPqRsTuVwXyZ1234567890AbCdEf=\n\n# ‚ö†Ô∏è Copy this long string! You'll need it next.\n# This is your JWT_SECRET - keep it secret!"
                },
                "Create .env File": {
                    description: "Create .env file with configuration values. Mac/Linux: Use cat command, Windows: Use Notepad. Replace YOUR_ACCOUNT_ID with 12-digit number from previous step, replace YOUR_JWT_SECRET with generated secret.",
                    command: "# Mac/Linux:\ncat > .env << 'EOF'\nAWS_REGION=us-east-1\nAWS_ACCOUNT_ID=YOUR_ACCOUNT_ID_HERE\nENVIRONMENT=production\nPROJECT_NAME=dental-hospital-system\nJWT_SECRET=YOUR_JWT_SECRET_HERE\nEOF\n\n# Windows (use Notepad):\n# Create new file named .env\n# Paste:\n# AWS_REGION=us-east-1\n# AWS_ACCOUNT_ID=YOUR_ACCOUNT_ID_HERE\n# ENVIRONMENT=production\n# PROJECT_NAME=dental-hospital-system\n# JWT_SECRET=YOUR_JWT_SECRET_HERE\n# Save in project directory\n\n# Then edit file and replace:\n# YOUR_ACCOUNT_ID_HERE ‚Üí Your 12-digit account ID\n# YOUR_JWT_SECRET_HERE ‚Üí Your generated secret"
                },
                "Verify .env File": {
                    description: "Verify .env file was created correctly. Should show your configuration (JWT_SECRET will be visible - that's okay, file is in .gitignore so won't be committed).",
                    command: "cat .env\n\n# Should show:\n# AWS_REGION=us-east-1\n# AWS_ACCOUNT_ID=123456789012\n# ENVIRONMENT=production\n# PROJECT_NAME=dental-hospital-system\n# JWT_SECRET=aBcDeFgHiJkLmNoPqRsTuVwXyZ...\n\n# ‚úÖ If you see your values, it worked!"
                },
                "Verify Project Structure": {
                    description: "Verify project has all required directories. Should see: package.json, src/ (source code), infrastructure/ (Terraform files), tests/ (test files), docs/ (documentation).",
                    command: "ls -la\n\n# Should see:\n# package.json  ‚Üê Project configuration\n# src/          ‚Üê Source code\n# infrastructure/ ‚Üê Terraform files\n# tests/        ‚Üê Test files\n# docs/         ‚Üê Documentation\n# .env          ‚Üê Your environment file (just created)\n\n# ‚úÖ If you see all these, you're ready!"
                },
                "Run Type Check (Optional)": {
                    description: "Check for code errors. This verifies TypeScript code compiles correctly. If you see errors, they're usually minor and won't block deployment.",
                    command: "npm run type-check\n\n# Expected: Completes without errors\n# If errors: Usually minor, won't block deployment"
                },
                "Run Unit Tests (Optional)": {
                    description: "Run unit tests to verify code works. Should see 'Tests: X passed'. If tests pass, you're ready to deploy!",
                    command: "npm run test:unit\n\n# Expected output:\n# PASS tests/unit/auth/AuthService.test.ts\n#   AuthService\n#     login\n#       ‚úì should successfully login\n# ...\n# Test Suites: 1 passed, 1 total\n# Tests: 6 passed, 6 total\n\n# ‚úÖ If tests pass, you're ready!"
                }
            },
            "Infrastructure Deployment": {
                "Navigate to Infrastructure Directory": {
                    description: "Navigate to infrastructure directory where Terraform files are. Run: cd infrastructure, then verify with: ls -la. Should see files ending in .tf (Terraform configuration files).",
                    command: "cd infrastructure\n\n# Verify you're in right place:\nls -la\n\n# Should see:\n# main.tf          ‚Üê Main configuration\n# variables.tf    ‚Üê Variable definitions\n# dynamodb.tf     ‚Üê Database tables\n# lambda.tf       ‚Üê Lambda functions\n# api-gateway.tf  ‚Üê API configuration\n# s3.tf           ‚Üê Storage buckets\n# etc."
                },
                "Get Your S3 Bucket Name": {
                    description: "‚ö†Ô∏è IMPORTANT: Get your S3 bucket name from Step 2. You wrote it down earlier. It should be: dental-hospital-terraform-state-YOUR-UNIQUE-NAME. You'll need this for terraform init.",
                    command: "# Check your saved notes or run:\naws s3 ls | grep terraform-state\n\n# Should show:\n# 2024-01-08 00:00:00 dental-hospital-terraform-state-YOUR-UNIQUE-NAME\n\n# ‚ö†Ô∏è Copy this exact bucket name - you'll need it next!"
                },
                "Initialize Terraform": {
                    description: "Initialize Terraform with S3 backend. This downloads Terraform plugins and sets up remote state storage. Replace YOUR-UNIQUE-NAME with your actual bucket name. Takes 1-2 minutes. Creates .terraform/ directory.",
                    command: "# Replace YOUR-UNIQUE-NAME with your actual bucket name!\nterraform init \\\n  -backend-config=\"bucket=dental-hospital-terraform-state-YOUR-UNIQUE-NAME\" \\\n  -backend-config=\"key=dental-hospital/terraform.tfstate\" \\\n  -backend-config=\"region=us-east-1\" \\\n  -backend-config=\"encrypt=true\"\n\n# Expected output:\n# Initializing the backend...\n# Initializing provider plugins...\n# - Finding hashicorp/aws versions matching \"~> 5.0\"...\n# - Installing hashicorp/aws v5.x.x...\n# ...\n# Terraform has been successfully initialized!\n\n# Time: 1-2 minutes\n\n# ‚ùå If errors:\n# - Check bucket name is correct\n# - Check AWS credentials: aws sts get-caller-identity\n# - Make sure bucket exists: aws s3 ls | grep terraform-state"
                },
                "Get JWT Secret from .env": {
                    description: "Get your JWT secret from the .env file you created earlier. You'll need this for terraform.tfvars file.",
                    command: "# Go back to project root:\ncd ..\n\n# View JWT secret:\ncat .env | grep JWT_SECRET\n\n# Copy the value after the = sign\n# Example: JWT_SECRET=aBcDeFgHiJkLmNoPqRsTuVwXyZ...\n\n# Go back to infrastructure:\ncd infrastructure"
                },
                "Create terraform.tfvars File": {
                    description: "Create terraform.tfvars file with your configuration. This tells Terraform what values to use. Replace YOUR_JWT_SECRET with the actual secret from .env file.",
                    command: "# Create the file:\ncat > terraform.tfvars << 'EOF'\naws_region = \"us-east-1\"\nenvironment = \"production\"\nproject_name = \"dental-hospital-system\"\njwt_secret = \"YOUR_JWT_SECRET_HERE\"\njwt_access_expiry = \"30m\"\njwt_refresh_expiry = \"30d\"\nrate_limit_per_user = 15\napi_gateway_stage_name = \"prod\"\nenable_cloudfront = true\nEOF\n\n# Then edit the file:\n# - Open terraform.tfvars in text editor\n# - Replace YOUR_JWT_SECRET_HERE with your actual JWT secret\n# - Save the file"
                },
                "Validate Terraform Configuration": {
                    description: "Validate Terraform configuration for syntax errors. This checks if your Terraform files are correct before trying to create resources.",
                    command: "terraform validate\n\n# Expected output:\n# Success! The configuration is valid.\n\n# ‚ùå If errors:\n# - Read error message carefully\n# - Usually a typo or missing value\n# - Fix the error and try again"
                },
                "Terraform Plan (Review What Will Be Created)": {
                    description: "Generate execution plan. This shows you EVERYTHING Terraform will create WITHOUT actually creating it. Review carefully! Should show ~20-30 resources: 8 DynamoDB tables, 10+ Lambda functions, 1 API Gateway, 3 S3 buckets, IAM roles, EventBridge rules, CloudFront. Takes 2-3 minutes.",
                    command: "terraform plan\n\n# What you'll see:\n# - Long list of resources with '+' (will be created)\n# - Review the list carefully\n# - Should see:\n#   + 8 DynamoDB tables\n#   + 10+ Lambda functions\n#   + 1 API Gateway\n#   + 3 S3 buckets\n#   + IAM roles and policies\n#   + EventBridge rules\n#   + CloudFront distribution\n\n# Time: 2-3 minutes\n\n# Optional: Save plan to file\nterraform plan -out=tfplan"
                },
                "Terraform Apply (Create Everything)": {
                    description: "‚ö†Ô∏è WARNING: This creates real AWS resources and may incur costs (though most will be free tier). Apply the infrastructure. Terraform will show the plan again, then ask for confirmation. Type 'yes' and press Enter. Takes 10-15 minutes. You'll see lots of output as resources are created.",
                    command: "terraform apply\n\n# OR use saved plan:\nterraform apply tfplan\n\n# Terraform will:\n# 1. Show the plan again\n# 2. Ask: 'Do you want to perform these actions?'\n# 3. Type: yes\n# 4. Press Enter\n\n# Expected output:\n# aws_dynamodb_table.users: Creating...\n# aws_dynamodb_table.users: Creation complete after 5s\n# aws_lambda_function.auth_handler: Creating...\n# ...\n# Apply complete! Resources: 25 added, 0 changed, 0 destroyed.\n\n# Time: 10-15 minutes\n\n# ‚ùå If errors:\n# - Don't panic! Read error message\n# - Common: Rate limiting (wait 1 min, try again)\n# - Permission errors (check IAM user has AdministratorAccess)\n# - Region errors (make sure using us-east-1)"
                },
                "Save Terraform Outputs": {
                    description: "Save all Terraform outputs (URLs, names, etc.) to a file. These contain important information like API URLs, bucket names, table names that you'll need later.",
                    command: "# Save all outputs to JSON file:\nterraform output -json > ../terraform-outputs.json\n\n# View outputs in terminal:\nterraform output\n\n# Important outputs you'll see:\n# - api_gateway_url: Your API endpoint URL\n# - images_bucket_name: S3 bucket for images\n# - cloudfront_url: CDN URL for images\n# - dynamodb_table_names: All table names\n# - lambda_functions: All function names"
                },
                "Save API Gateway URL": {
                    description: "‚ö†Ô∏è IMPORTANT: Save API Gateway URL to a file. This is your API endpoint - you'll need it to test the API and for the frontend to connect. Write it down!",
                    command: "# Save API URL to file:\nterraform output api_gateway_url > ../api-url.txt\n\n# View the URL:\ncat ../api-url.txt\n\n# Expected output:\n# https://abc123xyz.execute-api.us-east-1.amazonaws.com/prod\n\n# ‚ö†Ô∏è SAVE THIS URL! You'll need it:\n# - To test the API\n# - For frontend configuration\n# - For mobile app configuration"
                },
                "Verify All Resources Created": {
                    description: "Verify all AWS resources were created successfully. Check DynamoDB tables, Lambda functions, S3 buckets, API Gateway exist.",
                    command: "# Check DynamoDB tables:\naws dynamodb list-tables | grep dental-hospital\n# Should see 8 tables\n\n# Check Lambda functions:\naws lambda list-functions | grep dental-hospital\n# Should see 10+ functions\n\n# Check S3 buckets:\naws s3 ls | grep dental-hospital\n# Should see 3 buckets (images, archive, terraform-state)\n\n# Check API Gateway:\naws apigateway get-rest-apis | grep dental-hospital\n# Should see 1 API\n\n# ‚úÖ If you see all resources, infrastructure is deployed!"
                }
            },
            },
            "üîÑ Migration (New AWS Account)": {
                "Read Migration Guide": {
                    description: "Read the Migration Guide section in DEPLOYMENT.md and MIGRATION_GUIDE.md. This explains the free tier strategy, what gets migrated, and date preservation. Migration is for moving to a new AWS account after 10-11 months.",
                    command: "# Open: docs/DEPLOYMENT.md\n# Go to: Migration Guide section\n# Also see: docs/MIGRATION_GUIDE.md (detailed guide)\n\n# Understand:\n# - Why migrate (free tier expires after 12 months)\n# - What gets migrated (DynamoDB tables, S3 objects)\n# - Date preservation (all timestamps preserved)\n# - Timeline (migrate at month 10-11)"
                },
                "Export Data from Old Account": {
                    description: "Export all data from old AWS account. Configure AWS CLI for old account, then run migration export script. This exports DynamoDB tables and downloads S3 objects. See MIGRATION_GUIDE.md for details.",
                    command: "# Configure old account:\naws configure --profile old-account\n# Enter old account credentials\n\n# Export data:\nexport AWS_PROFILE=old-account\n./scripts/migrate-export-data.sh\n\n# Creates directory: migration-export-YYYYMMDD-HHMMSS\n# Contains:\n# - DynamoDB table exports (JSON files)\n# - S3 object downloads\n# - Migration manifest\n\n# ‚ö†Ô∏è This preserves all dates and timestamps!"
                },
                "Deploy Infrastructure in New Account": {
                    description: "Deploy infrastructure in new AWS account. Configure AWS CLI for new account, then run deployment in migration mode. This skips admin user creation (will import users from migration).",
                    command: "# Configure new account:\naws configure --profile new-account\n# Enter new account credentials\n\n# Deploy infrastructure:\nexport AWS_PROFILE=new-account\nnpm run deploy:all:migration\n\n# OR:\n./scripts/deploy-all.sh --migration --skip-admin\n\n# This will:\n# - Deploy all infrastructure\n# - Build and deploy Lambda functions\n# - Deploy API Gateway\n# - Skip admin user creation (will import from migration)"
                },
                "Import Data to New Account": {
                    description: "Import all data to new AWS account. This preserves all dates and timestamps exactly as they were in the original account. DynamoDB timestamps (created_at, updated_at, etc.) and S3 metadata are preserved.",
                    command: "# Import data:\nexport AWS_PROFILE=new-account\n./scripts/migrate-import-data.sh ./migration-export-YYYYMMDD-HHMMSS\n\n# This will:\n# - Import DynamoDB tables (preserves all timestamps)\n# - Upload S3 objects (preserves LastModified dates)\n# - Preserve all metadata\n\n# ‚ö†Ô∏è All dates remain exactly as they were!\n# - created_at, updated_at preserved\n# - assigned_date, step_date preserved\n# - upload_timestamp preserved\n# - consent_timestamp preserved\n# - All audit log timestamps preserved"
                },
                "Verify Migration": {
                    description: "Verify migration was successful. Run verification script to compare item counts, S3 bucket sizes, and sample timestamps between old and new accounts. All dates should match exactly.",
                    command: "./scripts/migrate-verify.sh ./migration-export-YYYYMMDD-HHMMSS\n\n# Compares:\n# - DynamoDB table item counts (should match)\n# - S3 bucket sizes (should match)\n# - Sample timestamps (should match exactly)\n\n# Expected output:\n# ‚úì Users table: 100 items (matches)\n# ‚úì Patients table: 500 items (matches)\n# ‚úì Images bucket: 2.5 GB (matches)\n# ‚úì Sample created_at: 2024-01-15T10:30:00Z (matches)\n\n# ‚úÖ If all match, migration successful!"
                },
                "Update Applications": {
                    description: "Update frontend/mobile applications with new API URL. Get the new API URL, update configuration files, test login, and verify all data is accessible.",
                    command: "# Get new API URL:\ncat api-url.txt\n# Should show new account's API Gateway URL\n\n# Update frontend:\n# Edit frontend/.env\n# API_BASE_URL=https://new-api-url.execute-api.us-east-1.amazonaws.com/prod\n\n# Update mobile app:\n# Edit mobile/src/constants/config.ts\n# API_BASE_URL=https://new-api-url.execute-api.us-east-1.amazonaws.com/prod\n\n# Test:\n# - Login with existing credentials\n# - Verify all patients visible\n# - Verify all procedures visible\n# - Verify all images accessible\n# - Check dates are correct (not changed)"
                },
                "Cleanup Old Account": {
                    description: "After verifying migration is successful and applications are working, you can delete resources in the old AWS account. ‚ö†Ô∏è Only do this after thorough verification!",
                    command: "# ‚ö†Ô∏è ONLY after thorough verification!\n\n# Option 1: Delete via Terraform\ncd infrastructure\nexport AWS_PROFILE=old-account\nterraform destroy\n# Type: yes\n\n# Option 2: Delete manually via AWS Console\n# Delete:\n# - DynamoDB tables\n# - S3 buckets\n# - Lambda functions\n# - API Gateway\n# - CloudFront distribution\n# - IAM roles\n\n# ‚ö†Ô∏è Be careful - this is irreversible!"
                }
            },
            "Application Deployment": {
                "Build TypeScript": {
                    description: "Build Lambda functions: npm run build:lambda. Creates dist/lambda/ directory with compiled JavaScript.",
                    command: "cd ..\nnpm run build:lambda\n# Creates dist/lambda/ directory\n# Compiles TypeScript to JavaScript"
                },
                "Verify Build": {
                    description: "Verify build output exists: ls -la dist/lambda/",
                    command: "ls -la dist/lambda/\n# Should see: auth/, users/, patients/, etc."
                },
                "Package Lambda Functions": {
                    description: "Package each Lambda function into zip files.",
                    command: "cd dist/lambda\nfor dir in */; do\n  cd \"$dir\"\n  zip -r \"../${dir%/}.zip\" .\n  cd ..\ndone"
                },
                "Create Lambda Environment File": {
                    description: "Create lambda-env.json with all environment variables from Terraform outputs.",
                    command: "cd ../../infrastructure\n# Get outputs and create lambda-env.json\n# See deployment guide for full command"
                },
                "Deploy Auth Handler": {
                    description: "Deploy auth-handler Lambda function.",
                    command: "aws lambda update-function-code \\\n  --function-name dental-hospital-system-production-auth-handler \\\n  --zip-file fileb://dist/auth-handler.zip"
                },
                "Deploy Users Handler": {
                    description: "Deploy users-handler Lambda function.",
                    command: "aws lambda update-function-code \\\n  --function-name dental-hospital-system-production-users-handler \\\n  --zip-file fileb://dist/users-handler.zip"
                },
                "Deploy Patients Handler": {
                    description: "Deploy patients-handler Lambda function.",
                    command: "aws lambda update-function-code \\\n  --function-name dental-hospital-system-production-patients-handler \\\n  --zip-file fileb://dist/patients-handler.zip"
                },
                "Deploy Procedures Handler": {
                    description: "Deploy procedures-handler Lambda function.",
                    command: "aws lambda update-function-code \\\n  --function-name dental-hospital-system-production-procedures-handler \\\n  --zip-file fileb://dist/procedures-handler.zip"
                },
                "Deploy Images Handler": {
                    description: "Deploy images-handler Lambda function.",
                    command: "aws lambda update-function-code \\\n  --function-name dental-hospital-system-production-images-handler \\\n  --zip-file fileb://dist/images-handler.zip"
                },
                "Deploy Remaining Handlers": {
                    description: "Deploy consent, audit, admin, steps, and archive handlers.",
                    command: "# Repeat for: consent-handler, audit-handler, admin-handler, steps-handler, archive-handler"
                },
                "Update Lambda Environment Variables": {
                    description: "Update all Lambda functions with environment variables from lambda-env.json.",
                    command: "for func in auth-handler users-handler patients-handler procedures-handler images-handler; do\n  aws lambda update-function-configuration \\\n    --function-name \"dental-hospital-system-production-${func}\" \\\n    --environment \"Variables=$(cat lambda-env.json)\"\ndone"
                },
                "Deploy API Gateway": {
                    description: "Create API Gateway deployment.",
                    command: "cd infrastructure\nAPI_ID=$(terraform output -raw api_gateway_id)\naws apigateway create-deployment \\\n  --rest-api-id \"$API_ID\" \\\n  --stage-name prod"
                }
            },
            "Configuration": {
                "Configure S3 CORS": {
                    description: "Configure CORS on images bucket for browser access.",
                    command: "aws s3api put-bucket-cors \\\n  --bucket YOUR_IMAGES_BUCKET \\\n  --cors-configuration file://s3-cors-config.json"
                },
                "Verify S3 Buckets": {
                    description: "Verify all S3 buckets were created successfully.",
                    command: "aws s3 ls | grep dental-hospital\n# Should see: images, archive buckets"
                },
                "Verify DynamoDB Tables": {
                    description: "Verify all DynamoDB tables were created.",
                    command: "aws dynamodb list-tables | grep dental-hospital\n# Should see 8 tables"
                },
                "Verify Lambda Functions": {
                    description: "Verify all Lambda functions exist and are deployed.",
                    command: "aws lambda list-functions | grep dental-hospital\n# Should see 10+ functions"
                },
                "Configure SNS Topic": {
                    description: "Verify SNS topic exists for OTP sending.",
                    command: "aws sns list-topics | grep dental-hospital\n# Note: Request SMS limits in AWS Support for production"
                },
                "Create Admin User": {
                    description: "Create initial hospital admin user in DynamoDB.",
                    command: "# Use AWS CLI or API to create admin user\n# See deployment guide for full command"
                }
            },
            "Testing": {
                "Test API Health": {
                    description: "Test API health endpoint (if exists).",
                    command: "API_URL=$(cat api-url.txt)\ncurl \"$API_URL/health\""
                },
                "Test Login Endpoint": {
                    description: "Test login API endpoint with admin credentials.",
                    command: "curl -X POST \"$API_URL/api/auth/login\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"mobile_number\":\"9999999999\",\"password\":\"YourPassword\"}'"
                },
                "Run Unit Tests": {
                    description: "Run unit tests: npm run test:unit",
                    command: "npm run test:unit\n# All tests should pass"
                },
                "Test Patient Creation": {
                    description: "Test creating a patient via API (requires authentication).",
                    command: "# Use access_token from login response\ncurl -X POST \"$API_URL/api/patients\" \\\n  -H \"Authorization: Bearer $ACCESS_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{...patient data...}'"
                },
                "Test Image Upload": {
                    description: "Test image upload functionality.",
                    command: "# Test image upload endpoint\n# Verify image appears in S3 bucket"
                },
                "Verify CloudWatch Logs": {
                    description: "Check CloudWatch logs for any errors.",
                    command: "aws logs tail /aws/lambda/dental-hospital-system-production-auth-handler --follow"
                }
            },
            "Monitoring Setup": {
                "Create CloudWatch Alarm": {
                    description: "Create CloudWatch alarm for Lambda errors.",
                    command: "aws cloudwatch put-metric-alarm \\\n  --alarm-name dental-hospital-lambda-errors \\\n  --metric-name Errors \\\n  --namespace AWS/Lambda \\\n  --threshold 10"
                },
                "Set Log Retention": {
                    description: "Set CloudWatch log retention to 30 days.",
                    command: "aws logs put-retention-policy \\\n  --log-group-name /aws/lambda/dental-hospital-system-production-auth-handler \\\n  --retention-in-days 30"
                },
                "Create CloudWatch Dashboard": {
                    description: "Create CloudWatch dashboard for monitoring (optional).",
                    command: "# Use AWS Console or CLI to create dashboard\n# Monitor: Lambda invocations, API Gateway requests, DynamoDB metrics"
                }
            },
            "Security Hardening": {
                "Review IAM Policies": {
                    description: "Review IAM policies and ensure least privilege principle.",
                    command: "# Review all IAM roles created by Terraform\n# Ensure they have minimum required permissions"
                },
                "Enable MFA": {
                    description: "Enable MFA for AWS root account and IAM users.",
                    command: "# AWS Console ‚Üí IAM ‚Üí Users ‚Üí Security credentials ‚Üí Enable MFA"
                },
                "Rotate Secrets": {
                    description: "Generate new JWT secret and update Lambda functions.",
                    command: "openssl rand -base64 32\n# Update Lambda environment variables with new secret"
                },
                "Enable DynamoDB Point-in-Time Recovery": {
                    description: "Enable PITR for critical DynamoDB tables.",
                    command: "aws dynamodb update-continuous-backups \\\n  --table-name dental-hospital-system-production-users \\\n  --point-in-time-recovery-specification PointInTimeRecoveryEnabled=true"
                },
                "Review Security Groups": {
                    description: "Review and restrict security groups (if any).",
                    command: "# Check AWS Console ‚Üí EC2 ‚Üí Security Groups\n# Ensure no unnecessary open ports"
                }
            },
            "Final Verification": {
                "Read Verification Section": {
                    description: "Read the Verification section in DEPLOYMENT.md. This provides comprehensive verification steps for all resources, API endpoints, and system functionality.",
                    command: "# Open: docs/DEPLOYMENT.md\n# Go to: Verification section\n# Follow all verification steps:\n# - Check API Gateway\n# - Check Lambda Functions\n# - Check DynamoDB Tables\n# - Check S3 Buckets\n# - Check CloudWatch Logs"
                },
                "Verify All Resources": {
                    description: "Verify all AWS resources are created and accessible. Use AWS CLI commands to check DynamoDB tables, Lambda functions, S3 buckets, and API Gateway. See DEPLOYMENT.md Verification section for commands.",
                    command: "# Check DynamoDB tables:\naws dynamodb list-tables | grep dental-hospital\n# Should see 8 tables\n\n# Check Lambda functions:\naws lambda list-functions | grep dental-hospital\n# Should see 10+ functions\n\n# Check S3 buckets:\naws s3 ls | grep dental-hospital\n# Should see 3 buckets (images, archive, terraform-state)\n\n# Check API Gateway:\naws apigateway get-rest-apis | grep dental-hospital\n# Should see 1 API\n\n# ‚úÖ If all resources exist, infrastructure is deployed!"
                },
                "Test Complete Workflow": {
                    description: "Test complete user workflow: login ‚Üí create patient ‚Üí create procedure ‚Üí upload image. This verifies the entire system works end-to-end. See DEPLOYMENT.md for detailed test commands.",
                    command: "# 1. Login:\nAPI_URL=$(cat api-url.txt)\nLOGIN_RESPONSE=$(curl -X POST \"$API_URL/api/auth/login\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"mobile_number\":\"9999999999\",\"password\":\"YourPassword\"}')\n\n# Extract token:\nACCESS_TOKEN=$(echo $LOGIN_RESPONSE | jq -r '.access_token')\n\n# 2. Create patient:\ncurl -X POST \"$API_URL/api/patients\" \\\n  -H \"Authorization: Bearer $ACCESS_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{...patient data...}'\n\n# 3. Create procedure:\ncurl -X POST \"$API_URL/api/procedures\" \\\n  -H \"Authorization: Bearer $ACCESS_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{...procedure data...}'\n\n# 4. Upload image:\ncurl -X POST \"$API_URL/api/images\" \\\n  -H \"Authorization: Bearer $ACCESS_TOKEN\" \\\n  -F \"file=@image.jpg\" \\\n  -F \"procedure_id=...\" \\\n  -F \"step_id=...\"\n\n# ‚úÖ If all steps work, system is fully functional!"
                },
                "Check CloudWatch Logs": {
                    description: "Check CloudWatch logs for any errors. Review logs for Lambda functions to ensure there are no runtime errors. See DEPLOYMENT.md Verification section.",
                    command: "# Check auth handler logs:\naws logs tail /aws/lambda/dental-hospital-system-production-auth-handler --follow\n\n# Check other handlers:\naws logs tail /aws/lambda/dental-hospital-system-production-users-handler\naws logs tail /aws/lambda/dental-hospital-system-production-patients-handler\n\n# Look for:\n# - ERROR messages\n# - Exception traces\n# - Failed requests\n\n# ‚úÖ If no errors, system is healthy!"
                },
                "Document Configuration": {
                    description: "Document your specific configuration (API URLs, bucket names, table names, etc.). Create a local config file (don't commit secrets!). This helps with future deployments and troubleshooting.",
                    command: "# Create local config file:\ncat > deployment-config.txt << EOF\n# Deployment Configuration\n# Date: $(date)\n\nAPI_URL=$(cat api-url.txt)\nADMIN_MOBILE=9999999999\nADMIN_PASSWORD=(your password)\n\n# Terraform Outputs:\n$(cat terraform-outputs.json | jq -r 'to_entries[] | \"\(.key): \(.value.value)\"')\nEOF\n\n# ‚ö†Ô∏è DO NOT commit this file to git!\n# It contains sensitive information\n# Keep it secure locally"
                },
                "Backup Configuration": {
                    description: "Backup Terraform state and configuration files securely. This helps with disaster recovery and future reference. Store backups securely (not in git).",
                    command: "# Backup files:\n# 1. Terraform outputs:\ncp terraform-outputs.json ~/backups/\n\n# 2. Terraform variables (without secrets):\ncat terraform.tfvars | grep -v jwt_secret > ~/backups/terraform.tfvars.backup\n\n# 3. API URL:\ncp api-url.txt ~/backups/\n\n# 4. .env file (securely, encrypted):\n# Use encryption tool or secure storage\n# DO NOT store in plain text!\n\n# ‚ö†Ô∏è Keep backups secure and encrypted!"
                },
                "Review Success Criteria": {
                    description: "Review the Success Criteria section in DEPLOYMENT.md. Verify all criteria are met: terraform apply completed, Lambda functions deployed, API Gateway accessible, login works, can create patient, can upload image, no CloudWatch errors.",
                    command: "# Check Success Criteria from DEPLOYMENT.md:\n# ‚úÖ terraform apply completed without errors\n# ‚úÖ All Lambda functions deployed\n# ‚úÖ API Gateway URL accessible\n# ‚úÖ Can login with admin credentials\n# ‚úÖ Can create a patient via API\n# ‚úÖ Can upload an image\n# ‚úÖ CloudWatch logs show no errors\n\n# If all criteria met:\n# üéâ Deployment successful!"
                }
            }
        };

        let checklistState = {};

        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('deploymentChecklist');
            if (saved) {
                checklistState = JSON.parse(saved);
            }
        }

        // Save progress
        function saveProgress() {
            localStorage.setItem('deploymentChecklist', JSON.stringify(checklistState));
            showNotification('Progress saved!');
            updateProgress();
        }

        // Reset all progress
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                checklistState = {};
                localStorage.removeItem('deploymentChecklist');
                renderChecklist();
                showNotification('Progress reset!');
            }
        }

        // Show notification
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Toggle checkbox
        function toggleCheckbox(section, step) {
            const key = `${section}-${step}`;
            if (!checklistState[key]) {
                checklistState[key] = true;
            } else {
                checklistState[key] = !checklistState[key];
            }
            saveProgress();
            renderChecklist();
        }

        // Toggle section
        function toggleSection(sectionId) {
            const content = document.getElementById(`section-${sectionId}`);
            const icon = document.getElementById(`icon-${sectionId}`);
            content.classList.toggle('active');
            icon.classList.toggle('expanded');
        }

        // Update progress
        function updateProgress() {
            let completed = 0;
            let total = 0;

            Object.keys(checklistData).forEach(section => {
                Object.keys(checklistData[section]).forEach(step => {
                    total++;
                    const key = `${section}-${step}`;
                    if (checklistState[key]) {
                        completed++;
                    }
                });
            });

            const percent = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            document.getElementById('progressBar').style.width = percent + '%';
            document.getElementById('progressBar').textContent = percent + '%';
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('totalCount').textContent = total;
            document.getElementById('progressPercent').textContent = percent + '%';
        }

        // Calculate section progress
        function getSectionProgress(section) {
            let completed = 0;
            let total = 0;
            Object.keys(checklistData[section]).forEach(step => {
                total++;
                const key = `${section}-${step}`;
                if (checklistState[key]) {
                    completed++;
                }
            });
            return total > 0 ? Math.round((completed / total) * 100) : 0;
        }

        // Render checklist
        function renderChecklist() {
            const content = document.getElementById('checklistContent');
            content.innerHTML = '';

            Object.keys(checklistData).forEach((section, sectionIndex) => {
                const sectionProgress = getSectionProgress(section);
                const sectionId = section.toLowerCase().replace(/\s+/g, '-');

                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section';
                sectionDiv.innerHTML = `
                    <div class="section-header" onclick="toggleSection('${sectionId}')">
                        <h2>${sectionIndex + 1}. ${section}</h2>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div class="section-progress">${sectionProgress}%</div>
                            <span class="expand-icon" id="icon-${sectionId}">‚ñº</span>
                        </div>
                    </div>
                    <div class="section-content" id="section-${sectionId}">
                        ${Object.keys(checklistData[section]).map((step, stepIndex) => {
                            const key = `${section}-${step}`;
                            const isCompleted = checklistState[key] || false;
                            const stepData = checklistData[section][step];
                            
                            return `
                                <div class="step ${isCompleted ? 'completed' : ''}">
                                    <input type="checkbox" 
                                           ${isCompleted ? 'checked' : ''} 
                                           onchange="toggleCheckbox('${section}', '${step.replace(/'/g, "\\'")}')"
                                           id="check-${key.replace(/\s+/g, '-')}">
                                    <div class="step-content">
                                        <div class="step-title">${stepIndex + 1}. ${step}</div>
                                        <div class="step-description">${stepData.description}</div>
                                        ${stepData.command ? `
                                            <div class="step-commands">
                                                <code>${stepData.command}</code>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                content.appendChild(sectionDiv);
            });

            updateProgress();
        }

        // Initialize
        loadProgress();
        renderChecklist();

        // Auto-save every 30 seconds
        setInterval(saveProgress, 30000);
    </script>
</body>
</html>

